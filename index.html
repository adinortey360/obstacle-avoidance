<!DOCTYPE html>
<html>

<head>
    <title>Obstacle Avoidance</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.147.0/build/three.module.js"
        }
      }
    </script>

    <script type="module">

        import * as THREE from 'three';

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0xffffff, 0);
        document.body.appendChild(renderer.domElement);


        const geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);
        const material = new THREE.MeshBasicMaterial({ color: 0x444444 });

        //subject
        const car = new THREE.Mesh(geometry, material);
        scene.add(car);


        //add obstacle

        // blue geometry
        const geometry2 = new THREE.BoxGeometry(0.5, 0.5, 0.5);
        const material2 = new THREE.MeshBasicMaterial({ color: 0x0000ff });
        const obstacle1 = new THREE.Mesh(geometry2, material2);
        // sligtly position to the top left
        obstacle1.position.set(0.5, 0.5, 0);
        scene.add(obstacle1);


        camera.position.z = 5;

        function move() {
            requestAnimationFrame(move);

            // move from left to right
            car.position.x += 0.001;
            car.position.y += 0.001;


            renderer.render(scene, camera);

            console.log("current position of car", car.position);

            console.log("current position of obstacle1", obstacle1.position);

            //calculateDistance()
            var distance = calculateDistance(car.position.x, car.position.y, obstacle1.position.x, obstacle1.position.y);

            console.log("distance", distance);


        };

        move();



        function calculateDistance(x1, y1, x2, y2) {
            var a = x1 - x2;
            var b = y1 - y2;

            var c = Math.sqrt(a * a + b * b);

            return c;
        }


        function checkCoooollision(distance) {
            if (distance < 0.5) {
                return true;
            } 
            return false;
        }
    </script>

</html>